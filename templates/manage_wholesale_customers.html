{% extends 'base.html' %}

{% block title %}จัดการลูกค้าค้าส่ง - ระบบจัดการสต็อก{% endblock %}

{% block content %}
    <h2 class="page-header">จัดการลูกค้าค้าส่ง</h2>

    <div class="form-section mb-4">
        <h3>เพิ่มลูกค้าค้าส่งใหม่</h3>
        <form action="{{ url_for('add_wholesale_customer_action') }}" method="POST">
            <div class="form-group half-width">
                <label for="customer_name">ชื่อลูกค้าค้าส่ง:</label>
                <input type="text" id="customer_name" name="customer_name" class="form-control" required placeholder="เช่น ร้านยางสุวิทย์, ร้านค้าส่ง A">
            </div>
            <button type="submit" class="btn btn-primary mt-2"><i class="fas fa-plus"></i> เพิ่มลูกค้า</button>
        </form>
    </div>

    <hr>

    <h3>รายชื่อลูกค้าค้าส่งที่มีอยู่</h3>
    {% if wholesale_customers %}
        <div class="table-responsive">
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>ชื่อลูกค้า</th>
                        <th>จัดการ</th>
                    </tr>
                </thead>
                <tbody>
                    {% for customer in wholesale_customers %}
                        <tr>
                            <td>{{ customer.id }}</td>
                            <td>{{ customer.name }}</td>
                            <td>
                                <a href="{{ url_for('edit_wholesale_customer', customer_id=customer.id) }}" class="btn btn-warning btn-small"><i class="fas fa-edit"></i> แก้ไข</a>
                                <form action="{{ url_for('delete_wholesale_customer', customer_id=customer.id) }}" method="POST" style="display:inline;" onsubmit="return confirm('คุณแน่ใจหรือไม่ที่ต้องการลบลูกค้าค้าส่ง {{ customer.name }}? การดำเนินการนี้จะไม่ลบ Movement ที่เกี่ยวข้อง แต่จะตั้งค่าลูกค้าเป็น 'ไม่ระบุ' หากมีการลบลูกค้าที่ใช้งานอยู่');">
                                    <button type="submit" class="btn btn-danger-small"><i class="fas fa-trash-alt"></i> ลบ</button>
                                </form>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <p class="no-data">ยังไม่มีลูกค้าค้าส่งในระบบ</p>
    {% endif %}

{% endblock %}